<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é–€å¸‚æ’ç­ç®¡ç†</title>
    <style>
        /* === å…¨å±€è¨­å®š === */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Microsoft JhengHei", sans-serif; background-color: #f2f2f7; padding: 0; margin: 0; padding-bottom: 90px; }
        .container { max-width: 500px; margin: 0 auto; }
        
        /* === é ‚éƒ¨å›ºå®šå€ === */
        .sticky-header {
            position: sticky; top: 0; background-color: #f2f2f7; z-index: 100;
            padding: 15px 15px 5px 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.05);
        }

        /* æ—¥æœŸæ§åˆ¶å€ */
        .header-controls {
            display: flex; justify-content: space-between; align-items: center;
            background: white; padding: 8px; border-radius: 12px; margin-bottom: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .date-picker-container { flex: 1; text-align: center; position: relative; }
        input[type="date"] { border: none; background: transparent; font-size: 17px; font-weight: 700; color: #1c1c1e; text-align: center; width: 135px; cursor: pointer; }
        .arrow-btn {
            background: #f2f2f7; border: none; width: 40px; height: 40px; border-radius: 50%;
            font-size: 18px; color: #007aff; font-weight: bold; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
        }

        /* æ˜ŸæœŸå°è¦½åˆ— */
        .nav-bar { display: flex; justify-content: space-between; gap: 5px; padding-bottom: 5px; }
        .nav-btn {
            flex: 1; background: #ffffff; border: none; border-radius: 8px; padding: 10px 0;
            font-size: 14px; font-weight: 600; color: #8e8e93; cursor: pointer; transition: all 0.2s;
        }
        .nav-btn.active { background-color: #007aff; color: white; box-shadow: 0 2px 8px rgba(0, 122, 255, 0.3); }

        /* === å…§å®¹å€ === */
        #contentArea { padding: 10px 20px; }
        .empty-week { text-align: center; padding: 40px 20px; color: #8e8e93; }

        /* === æˆ‘çš„ç­è¡¨å¡ç‰‡ === */
        .day-card { 
            background: white; border-radius: 16px; padding: 16px; margin-bottom: 16px; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.03); display: flex; flex-direction: column; 
            position: relative; scroll-margin-top: 180px;
        }
        .day-card.work::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 6px; background-color: #007aff; }
        .day-card.rest::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 6px; background-color: #e5e5ea; }
        
        .card-header { display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 8px; padding-left: 10px; }
        .day-title { font-size: 18px; font-weight: 700; color: #1c1c1e; }
        .shift-badge { font-size: 14px; font-weight: 600; padding: 4px 10px; border-radius: 20px; background: #f2f2f7; color: #8e8e93; }
        .work .shift-badge { background-color: #eaf2ff; color: #007aff; }

        .detail-row { display: flex; justify-content: space-between; font-size: 15px; margin-top: 6px; color: #3a3a3c; border-bottom: 1px solid #f2f2f7; padding-bottom: 6px; padding-left: 10px;}
        .detail-row:last-child { border-bottom: none; }
        .loc { font-weight: 600; }
        .time { font-family: monospace, sans-serif; color: #636366; }

        /* === åŒäº‹ç­è¡¨æ¨£å¼ (æ–°ç‰ˆ) === */
        .others-card {
            background: white; border-radius: 16px; overflow: hidden; margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.03); scroll-margin-top: 180px;
        }
        .others-header {
            background: #f8f9fa; padding: 12px 15px; border-bottom: 1px solid #eee;
            display: flex; justify-content: space-between; align-items: center;
        }
        .others-title { font-size: 18px; font-weight: 800; color: #333; }
        .others-date { font-size: 14px; color: #888; }

        /* åº—é‹ªå€å¡Š */
        .store-section { border-bottom: 4px solid #f2f2f7; }
        .store-section:last-child { border-bottom: none; }
        
        .store-title {
            padding: 8px 15px; font-size: 14px; font-weight: 700; color: #555;
            background: #fff; display: flex; align-items: center; letter-spacing: 0.5px;
        }
        .store-icon { margin-right: 6px; font-size: 16px; }

        .staff-row {
            display: flex; justify-content: space-between; align-items: center;
            padding: 10px 15px; border-top: 1px solid #f2f2f7;
        }
        .staff-name { font-weight: 600; font-size: 15px; color: #333; }
        .staff-loc-tag { font-size: 11px; background: #ffefe0; color: #ff9500; padding: 2px 5px; border-radius: 4px; margin-left: 5px; }
        .staff-time { font-family: monospace, sans-serif; font-size: 14px; color: #007aff; font-weight: 500; }
        .no-staff { padding: 10px 15px; color: #ccc; font-size: 13px; font-style: italic; border-top: 1px solid #f2f2f7; }

        /* === åº•éƒ¨å°è¦½åˆ— === */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; right: 0;
            background: white; border-top: 1px solid #e5e5ea;
            display: flex; justify-content: space-around; padding: 10px 0 25px 0; z-index: 200;
        }
        .tab-btn {
            border: none; background: none; color: #8e8e93; font-size: 10px; font-weight: 600;
            display: flex; flex-direction: column; align-items: center; cursor: pointer; width: 50%;
        }
        .tab-icon { font-size: 24px; margin-bottom: 4px; }
        .tab-btn.active { color: #007aff; }
        
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container">
    <div class="sticky-header">
        <div class="header-controls">
            <button class="arrow-btn" onclick="changeWeek(-1)">â®</button>
            <div class="date-picker-container">
                <input type="date" id="datePicker" onchange="onDatePick()">
                <div style="font-size: 10px; color: #888;">(é»æ“Šé¸æ“‡æ—¥æœŸ)</div>
            </div>
            <button class="arrow-btn" onclick="changeWeek(1)">â¯</button>
        </div>
        <div class="nav-bar hidden" id="myNavBar"></div>
        <div class="nav-bar hidden" id="othersNavBar"></div>
    </div>

    <div id="contentArea"></div>
</div>

<div class="bottom-nav">
    <button class="tab-btn active" onclick="switchTab('my')" id="tab-my">
        <span class="tab-icon">ğŸ‘¤</span>æˆ‘çš„ç­è¡¨
    </button>
    <button class="tab-btn" onclick="switchTab('others')" id="tab-others">
        <span class="tab-icon">ğŸª</span>å„åº—æ’ç­
    </button>
</div>

<script>
    // ==========================================
    // 1. è³‡æ–™åº«å€åŸŸ
    // ==========================================
    
    // ã€æˆ‘çš„ç­è¡¨ã€‘(ç‹æ³“éŸ‹) - æ›´æ–°è‡³ 12/1 ~ 12/7 (å«æ™ºå–åº—æ”¯æ´)
    const MY_ROSTER = {
        "2025-12-01": [
            { id: 0, day: "é€±ä¸€", type: "work", name: "ğŸ  ç›Šæ°‘åˆ6", list: [{loc:"ç›Šæ°‘åº—", t:"åˆ6"}] }
        ],
        "2025-12-02": [
            { id: 1, day: "é€±äºŒ", type: "work", name: "ğŸ  ç›Šæ°‘åˆ6", list: [{loc:"ç›Šæ°‘åº—", t:"åˆ6"}] }
        ],
        "2025-12-03": [
            { id: 2, day: "é€±ä¸‰", type: "work", name: "âš ï¸ æ™ºå–æ”¯æ´", list: [{loc:"ç«‹é«˜", t:"08:00-08:30"}, {loc:"é”æ˜", t:"08:30-09:30"}, {loc:"é•·æ¦®", t:"09:30-10:30"}] }
        ],
        "2025-12-04": [
            { id: 3, day: "é€±å››", type: "work", name: "âš ï¸ æ™ºå–/æ¨¹å¾·", list: [{loc:"å¾·å¯Œ", t:"08:00-09:00"}, {loc:"å»ºåœ‹å—", t:"09:00-09:30"}, {loc:"æ¨¹å¾·åº—", t:"åˆ6"}] }
        ],
        "2025-12-05": [
            { id: 4, day: "é€±äº”", type: "rest", name: "ä¼‘å‡", list: [] }
        ],
        "2025-12-06": [
            { id: 5, day: "é€±å…­", type: "rest", name: "ä¼‘å‡", list: [] }
        ],
        "2025-12-07": [
            { id: 6, day: "é€±æ—¥", type: "work", name: "âš ï¸ æ”¯æ´é«˜å·¥", list: [{loc:"é«˜å·¥åº—", t:"æ—©6"}] }
        ]
    };

    // ã€äº”åº—è©³ç´°ç­è¡¨ã€‘ - æ›´æ–°è‡³ 12/1 ~ 12/7
    const OTHERS_ROSTER = {
        "2025-12-01": [
            {
                date: "12/1 (ä¸€)",
                stores: {
                    "æ±æ¦®åº—": [
                        {n:"é™³æŸå»·", t:"æ—©8 11:00-18:00"}, {n:"å³æŸ”æ—‹", t:"æ™š4 19:00-21:30"}, {n:"é‚±éƒç´˜", t:"åˆ6(ç›Šæ°‘)"}
                    ],
                    "å¤§é‡Œåº—": [
                        {n:"æ—ç¾½åº­", t:"æ—©8 11:00-18:00"}, {n:"å”ç¾…æ°", t:"åˆ6"}, {n:"åŠ‰å‰æ™", t:"æ™š4 19:00-22:00"}
                    ],
                    "ç›Šæ°‘åº—": [
                        {n:"é„­ç¿”ä»‹", t:"æ—©6"}, {n:"ç‹æ³“éŸ‹", t:"åˆ6"}, {n:"æ½˜æ˜•å²‘", t:"æ™š4 19:30-22:00"}
                    ],
                    "é«˜å·¥åº—": [
                        {n:"æ›¾å®¶ç¹", t:"æ—©8 11:00-18:00"}, {n:"æ—ä¾ƒè¾°", t:"åˆ6"}, {n:"æ—å¨ç²½", t:"æ™š4 19:30-22:00"}
                    ],
                    "æ¨¹å¾·åº—": [
                        {n:"æè‚²å˜‰", t:"æ—©8 11:00-18:00"}, {n:"å¾æŒ¯æ³°", t:"åˆ6"}, {n:"æ—ç´«æ¶µ", t:"æ™š4 19:30-21:30(é«˜å·¥)"}
                    ]
                }
            },
            {
                date: "12/2 (äºŒ)",
                stores: {
                    "æ±æ¦®åº—": [
                        {n:"é™³æŸå»·", t:"æ—©6"}, {n:"æ–½å®£å‰", t:"æ™š4 19:30-21:30"}, {n:"åŠ‰å‰æ™", t:"åˆ6(å¤§é‡Œ)"}
                    ],
                    "å¤§é‡Œåº—": [
                        {n:"ç™½æ²…å¹³", t:"åˆ6"}, {n:"æ—è‚²ç‘›", t:"æ—©8 11:00-18:00(ç›Šæ°‘)"}, {n:"æå¾‹è¡¡", t:"æ™š4 19:30-21:30(æ±æ¦®)"}
                    ],
                    "ç›Šæ°‘åº—": [
                        {n:"ç‹èºè", t:"æ—©6"}, {n:"ç‹æ³“éŸ‹", t:"åˆ6"}, {n:"æ–½è‚²ä¸", t:"æ™š4 19:00-22:00"}
                    ],
                    "é«˜å·¥åº—": [
                        {n:"æ›¾å®¶ç¹", t:"æ—©8 11:00-18:00"}, {n:"æ—å¨ç²½", t:"æ™š4 19:00-22:00"}, {n:"æ—ç´«æ¶µ", t:"åˆ6"}
                    ],
                    "æ¨¹å¾·åº—": [
                        {n:"ç‹éŸ»æ™´", t:"æ—©8 11:00-18:30"}, {n:"æ´ªäº¦è“", t:"åˆ6(é«˜å·¥)"}
                    ]
                }
            },
            {
                date: "12/3 (ä¸‰)",
                stores: {
                    "æ±æ¦®åº—": [
                        {n:"å³æŸ”æ—‹", t:"æ™š4 19:30-21:30"}, {n:"é„­ç¿”ä»‹", t:"æ—©6(ç›Šæ°‘)"}, {n:"å”ç¾…æ°", t:"åˆ6(å¤§é‡Œ)"}
                    ],
                    "å¤§é‡Œåº—": [
                        {n:"æ—ç¾½åº­", t:"æ—©8 11:00-18:00"}, {n:"ç™½æ²…å¹³", t:"æ™š4 19:30-21:30"}, {n:"é«˜ä¾é “", t:"åˆ6"}
                    ],
                    "ç›Šæ°‘åº—": [
                        {n:"ç‹èºè", t:"æ—©6"}, {n:"æ½˜æ˜•å²‘", t:"æ™š4 19:00-22:00"}
                    ],
                    "é«˜å·¥åº—": [
                        {n:"æ›¾å®¶ç¹", t:"æ—©8 11:00-18:00"}, {n:"æ—ä¾ƒè¾°", t:"åˆ6"}, {n:"æ—å¨ç²½", t:"æ™š4 19:00-22:00"}
                    ],
                    "æ¨¹å¾·åº—": [
                        {n:"ç‹éŸ»æ™´", t:"æ—©8 11:00-18:00"}, {n:"æ´ªäº¦è“", t:"åˆ6(é«˜å·¥)"}
                    ]
                }
            },
            {
                date: "12/4 (å››)",
                stores: {
                    "æ±æ¦®åº—": [
                        {n:"å³æŸ”æ—‹", t:"åˆ6"}, {n:"æ¥Šä½³å‹", t:"æ™š4 19:30-21:30"}, {n:"æ—è‚²ç‘›", t:"æ—©6(ç›Šæ°‘)"}
                    ],
                    "å¤§é‡Œåº—": [
                        {n:"æ—ç¾½åº­", t:"æ—©8 11:00-18:00"}, {n:"ç™½æ²…å¹³", t:"æ™š4 19:30-21:30"}, {n:"åŠ‰å‰æ™", t:"åˆ6"}
                    ],
                    "ç›Šæ°‘åº—": [
                        {n:"ç‹èºè", t:"æ—©6"}, {n:"é‚±éƒç´˜", t:"åˆ6"}, {n:"æ½˜æ˜•å²‘", t:"æ™š4 19:00-22:00"}
                    ],
                    "é«˜å·¥åº—": [
                        {n:"æ›¾å®¶ç¹", t:"æ—©8 11:00-18:00"}, {n:"æ—å¨ç²½", t:"åˆ6"}, {n:"æ—ç´«æ¶µ", t:"æ™š4 19:00-22:00"}
                    ],
                    "æ¨¹å¾·åº—": [
                        {n:"ç‹éŸ»æ™´", t:"æ—©8 11:00-18:00"}, {n:"ç‹æ³“éŸ‹", t:"åˆ6(ç›Šæ°‘)"}
                    ]
                }
            },
            {
                date: "12/5 (äº”)",
                stores: {
                    "æ±æ¦®åº—": [
                        {n:"é™³æŸå»·", t:"æ—©6"}, {n:"å³æŸ”æ—‹", t:"åˆ6"}, {n:"æ¥Šä½³å‹", t:"æ™š4 19:30-21:30"}
                    ],
                    "å¤§é‡Œåº—": [
                        {n:"æ—ç¾½åº­", t:"æ—©8 11:00-18:00"}, {n:"å”ç¾…æ°", t:"åˆ6"}, {n:"ç™½æ²…å¹³", t:"æ™š4 19:30-21:30"}
                    ],
                    "ç›Šæ°‘åº—": [
                        {n:"ç‹èºè", t:"æ—©6"}, {n:"æ½˜æ˜•å²‘", t:"åˆ6"}, {n:"æ–½è‚²ä¸", t:"æ™š4 19:00-22:00"}
                    ],
                    "é«˜å·¥åº—": [
                        {n:"æ›¾å®¶ç¹", t:"æ—©8 11:00-18:00"}, {n:"æ—å¨ç²½", t:"åˆ6"}, {n:"æ—ç´«æ¶µ", t:"æ™š4 19:00-22:00"}
                    ],
                    "æ¨¹å¾·åº—": [
                        {n:"ç‹éŸ»æ™´", t:"æ—©8 11:00-18:00"}, {n:"æ—ä¾ƒè¾°", t:"åˆ6(é«˜å·¥)"}
                    ]
                }
            },
            {
                date: "12/6 (å…­)",
                stores: {
                    "æ±æ¦®åº—": [
                        {n:"é™³æŸå»·", t:"æ—©4"}, {n:"æ¥Šä½³å‹", t:"åˆ8"}
                    ],
                    "å¤§é‡Œåº—": [
                        {n:"å”ç¾…æ°", t:"åˆ6"}, {n:"é‚±éƒç´˜", t:"æ—©6(ç›Šæ°‘)"}
                    ],
                    "ç›Šæ°‘åº—": [
                        {n:"ç‹èºè", t:"æ—©4"}, {n:"æ–½è‚²ä¸", t:"åˆ6"}, {n:"è—ç«‹å‚‘", t:"åˆ4 15:00-18:00"}
                    ],
                    "é«˜å·¥åº—": [
                        {n:"æ´ªäº¦è“", t:"æ—©8 11:00-18:30"}, {n:"æ—ç´«æ¶µ", t:"åˆ6"}
                    ],
                    "æ¨¹å¾·åº—": [
                        {n:"æè‚²å˜‰", t:"æ—©8 11:00-18:00"}, {n:"å¾æŒ¯æ³°", t:"åˆ6"}
                    ]
                }
            },
            {
                date: "12/7 (æ—¥)",
                stores: {
                    "æ±æ¦®åº—": [
                        {n:"é™³æŸå»·", t:"æ—©6"}, {n:"æ–½å®£å‰", t:"åˆ6"}
                    ],
                    "å¤§é‡Œåº—": [
                        {n:"ç™½æ²…å¹³", t:"åˆ6"}, {n:"é‚±éƒç´˜", t:"æ—©6(ç›Šæ°‘)"}
                    ],
                    "ç›Šæ°‘åº—": [
                        {n:"æ—è‚²ç‘›", t:"æ—©6"}, {n:"æ½˜æ˜•å²‘", t:"åˆ6"}
                    ],
                    "é«˜å·¥åº—": [
                        {n:"æ—ä¾ƒè¾°", t:"åˆ6"}, {n:"ç‹æ³“éŸ‹", t:"æ—©6(ç›Šæ°‘)"}
                    ],
                    "æ¨¹å¾·åº—": [
                        {n:"ç‹éŸ»æ™´", t:"æ—©6"}, {n:"å¾æŒ¯æ³°", t:"åˆ6"}
                    ]
                }
            }
        ]
    };

    // ==========================================
    // 2. ç¨‹å¼é‚è¼¯
    // ==========================================
    function getMonday(d) {
        d = new Date(d);
        var day = d.getDay();
        var diff = d.getDate() - day + (day == 0 ? -6 : 1);
        return new Date(d.setDate(diff));
    }
    function formatDateISO(d) {
        let y = d.getFullYear();
        let m = String(d.getMonth() + 1).padStart(2, '0');
        let day = String(d.getDate()).padStart(2, '0');
        return `${y}-${m}-${day}`;
    }

    // å°‡é è¨­æ—¥æœŸè¨­å®šç‚º 2025-12-01ï¼Œä»¥ä¾¿ç›´æ¥é¡¯ç¤ºæ–°ç­è¡¨
    let currentMonday = getMonday(new Date("2025-12-01"));
    let currentTab = 'my'; 

    // åˆå§‹åŒ–
    renderPage();

    function switchTab(tabName) {
        currentTab = tabName;
        document.getElementById('tab-my').className = tabName === 'my' ? 'tab-btn active' : 'tab-btn';
        document.getElementById('tab-others').className = tabName === 'others' ? 'tab-btn active' : 'tab-btn';
        renderPage();
    }

    function changeWeek(offset) {
        currentMonday.setDate(currentMonday.getDate() + (offset * 7));
        renderPage();
    }
    
    function onDatePick() {
        const picker = document.getElementById("datePicker");
        if(picker.value) {
            currentMonday = getMonday(new Date(picker.value));
            renderPage();
        }
    }

    function renderPage() {
        let dateKey = formatDateISO(currentMonday);
        document.getElementById("datePicker").value = dateKey;

        const contentDiv = document.getElementById("contentArea");
        const myNav = document.getElementById("myNavBar");
        const othersNav = document.getElementById("othersNavBar");
        
        contentDiv.innerHTML = "";

        if (currentTab === 'my') {
            myNav.classList.remove("hidden");
            othersNav.classList.add("hidden");
            renderMySchedule(dateKey, contentDiv, myNav);
        } else {
            myNav.classList.add("hidden");
            othersNav.classList.remove("hidden");
            renderOthersSchedule(dateKey, contentDiv, othersNav);
        }
    }

    // æ¸²æŸ“ï¼šæˆ‘çš„ç­è¡¨
    function renderMySchedule(dateKey, listDiv, navDiv) {
        const weekData = MY_ROSTER[dateKey];
        navDiv.innerHTML = "";

        if (!weekData) {
            listDiv.innerHTML = `<div class="empty-week">ğŸ“… æœ¬é€±å°šç„¡æ‚¨çš„ç­è¡¨</div>`;
            return;
        }

        weekData.forEach((item, index) => {
            let btn = document.createElement("button");
            btn.className = "nav-btn";
            btn.innerText = item.day.replace("é€±","");
            btn.onclick = () => scrollToId(`card-${index}`, index, 'my');
            btn.id = `my-btn-${index}`;
            navDiv.appendChild(btn);

            let html = `
                <div class="day-card ${item.type}" id="card-${index}">
                    <div class="card-header">
                        <span class="day-title">${item.day}</span>
                        <span class="shift-badge">${item.name}</span>
                    </div>
            `;
            if(item.list.length > 0) {
                item.list.forEach(sub => {
                    html += `
                        <div class="detail-row">
                            <span class="loc">ğŸ“ ${sub.loc}</span>
                            <span class="time">${sub.t}</span>
                        </div>`;
                });
            }
            html += `</div>`;
            listDiv.innerHTML += html;
        });
        
        autoHighlightDay('my');
    }

    // æ¸²æŸ“ï¼šäº”åº—ç­è¡¨
    function renderOthersSchedule(dateKey, listDiv, navDiv) {
        const weekData = OTHERS_ROSTER[dateKey];
        navDiv.innerHTML = "";

        if (!weekData) {
            listDiv.innerHTML = `<div class="empty-week">ğŸ‘¥ æœ¬é€±å°šæœªè¨˜éŒ„åŒäº‹ç­è¡¨</div>`;
            return;
        }

        const days = ["ä¸€", "äºŒ", "ä¸‰", "å››", "äº”", "å…­", "æ—¥"];
        
        weekData.forEach((dayInfo, index) => {
            // å°è¦½æŒ‰éˆ•
            let btn = document.createElement("button");
            btn.className = "nav-btn";
            btn.innerText = days[index];
            btn.onclick = () => scrollToId(`others-${index}`, index, 'others');
            btn.id = `others-btn-${index}`;
            navDiv.appendChild(btn);

            // å¡ç‰‡
            let html = `
                <div class="others-card" id="others-${index}">
                    <div class="others-header">
                        <span class="others-title">${dayInfo.date.split(' ')[0]} é€±${days[index]}</span>
                    </div>
            `;

            // äº”åº—è¿´åœˆ
            const storeOrder = ["æ±æ¦®åº—", "å¤§é‡Œåº—", "ç›Šæ°‘åº—", "é«˜å·¥åº—", "æ¨¹å¾·åº—"];
            
            storeOrder.forEach(storeName => {
                let staffs = dayInfo.stores[storeName];
                html += `<div class="store-section">
                            <div class="store-title">
                                <span class="store-icon">ğŸ¢</span>${storeName}
                            </div>`;
                
                if(staffs && staffs.length > 0) {
                    staffs.forEach(p => {
                        html += `
                            <div class="staff-row">
                                <div>
                                    <span class="staff-name">${p.n}</span>
                                    ${p.t.includes('(') ? `<span class="staff-loc-tag">${p.t.split('(')[1].replace(')','')}</span>` : ''}
                                </div>
                                <span class="staff-time">${p.t.split(' ')[0]}</span>
                            </div>
                        `;
                    });
                } else {
                    html += `<div class="no-staff">æœ¬æ—¥ç„¡æ’ç­</div>`;
                }
                html += `</div>`;
            });

            html += `</div>`;
            listDiv.innerHTML += html;
        });

        autoHighlightDay('others');
    }

    function scrollToId(elementId, index, prefix) {
        document.querySelectorAll(`#${prefix}NavBar .nav-btn`).forEach(b => b.classList.remove('active'));
        let btn = document.getElementById(`${prefix}-btn-${index}`);
        if(btn) btn.classList.add('active');
        
        const el = document.getElementById(elementId);
        if(el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function autoHighlightDay(prefix) {
        let today = new Date();
        let diffTime = today - currentMonday;
        let diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
        
        let targetIdx = 0; // default Monday
        if (diffDays >= 0 && diffDays <= 6) {
            let todayIdx = today.getDay() - 1;
            if (todayIdx < 0) todayIdx = 6;
            targetIdx = todayIdx;
        }
        
        setTimeout(() => {
            let btn = document.getElementById(`${prefix}-btn-${targetIdx}`);
            if(btn) btn.classList.add('active');
        }, 50);
    }
</script>
</body>
</html>