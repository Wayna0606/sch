<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é–€å¸‚æ’ç­ç®¡ç†</title>
    <style>
        /* === å…¨å±€è®Šæ•¸å®šç¾© (é…è‰²æ–¹æ¡ˆ) === */
        :root {
            --bg-main: #f4f7fa;     /* èƒŒæ™¯æ·¡è—ç° */
            --bg-card: #ffffff;     /* å¡ç‰‡ç™½åº• */
            --text-primary: #1f1f1f; /* ä¸»è¦æ·±è‰²æ–‡å­— */
            --text-secondary: #8c8c8c; /* æ¬¡è¦ç°è‰²æ–‡å­— */
            --color-blue: #1890ff;    /* ä¸»è—è‰² */
            --color-blue-light: #e6f7ff; /* æ·ºè—èƒŒæ™¯ */
            --color-pink: #ff4d4f;    /* ç²‰ç´…è‰² (åœ°é») */
            --color-purple: #722ed1; /* ç´«è‰² (å°è¦½åˆ—) */
            --color-rest: #d9d9d9;    /* ä¼‘å‡ç°è‰² */
            --shadow-soft: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        /* === å…¨å±€è¨­å®š === */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg-main);
            color: var(--text-primary);
            padding: 0; margin: 0; padding-bottom: 90px;
            -webkit-font-smoothing: antialiased;
        }
        .container { max-width: 500px; margin: 0 auto; }
        
        /* === é ‚éƒ¨å€åŸŸ === */
        .sticky-header {
            position: sticky; top: 0; z-index: 100;
            padding: 15px 20px 5px 20px;
            background: transparent;
        }

        /* æ—¥æœŸæ§åˆ¶å¡ç‰‡ */
        .header-controls {
            display: flex; justify-content: space-between; align-items: center;
            background: var(--bg-card); padding: 10px 15px;
            border-radius: 16px; margin-bottom: 15px;
            box-shadow: var(--shadow-soft);
        }
        .date-picker-container { flex: 1; text-align: center; position: relative; }
        input[type="date"] { 
            border: none; background: transparent; 
            font-size: 18px; font-weight: 800; color: var(--text-primary); 
            text-align: center; width: 140px; cursor: pointer; font-family: inherit;
        }
        .arrow-btn {
            background: var(--bg-main); border: none; width: 36px; height: 36px; border-radius: 50%;
            font-size: 16px; color: var(--color-blue); font-weight: bold; cursor: pointer;
            display: flex; align-items: center; justify-content: center; transition: background 0.2s;
        }
        .arrow-btn:active { background: #e6ebf0; }

        /* æ˜ŸæœŸå°è¦½åˆ— */
        .nav-bar { display: flex; justify-content: space-between; gap: 8px; padding: 0 5px 10px 5px; }
        .nav-btn {
            flex: 1; background: transparent; border: none; border-radius: 12px; padding: 10px 0;
            font-size: 14px; font-weight: 600; color: var(--text-secondary); cursor: pointer; transition: all 0.2s;
        }
        .nav-btn.active { 
            color: var(--text-primary); background: var(--bg-card);
            box-shadow: var(--shadow-soft); position: relative;
        }
        .nav-btn.active::after {
            content: ''; position: absolute; bottom: 6px; left: 50%; transform: translateX(-50%);
            width: 20px; height: 3px; background: var(--color-blue); border-radius: 2px;
        }

        /* === å…§å®¹å€ === */
        #contentArea { padding: 10px 20px; }
        .empty-week { text-align: center; padding: 50px 20px; color: var(--text-secondary); font-weight: 500; }

        /* === æˆ‘çš„ç­è¡¨å¡ç‰‡ === */
        .day-card { 
            background: var(--bg-card); border-radius: 16px; padding: 16px 20px;
            margin-bottom: 16px; box-shadow: var(--shadow-soft);
            display: flex; flex-direction: column;
            border-left: 4px solid transparent; scroll-margin-top: 180px;
        }
        .day-card.work { border-left-color: var(--color-blue); }
        .day-card.rest { border-left-color: var(--color-rest); opacity: 0.8; }
        
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .day-title { font-size: 18px; font-weight: 800; color: var(--text-primary); }
        
        .shift-badge {
            font-size: 13px; font-weight: 600; padding: 6px 12px; border-radius: 24px;
            display: flex; align-items: center; gap: 4px;
        }
        .work .shift-badge { background-color: var(--color-blue-light); color: var(--color-blue); }
        .rest .shift-badge { background-color: #f0f0f0; color: var(--text-secondary); }
        .badge-icon { font-size: 14px; }

        .detail-row {
            display: flex; justify-content: space-between; align-items: center;
            font-size: 15px; margin-top: 10px; color: var(--text-primary);
        }
        .loc-container { display: flex; align-items: center; font-weight: 600; }
        .loc-pin { color: var(--color-pink); margin-right: 6px; font-size: 16px; }
        .time { font-family: "SF Mono", "Roboto Mono", monospace; color: var(--text-secondary); font-weight: 500; }

        /* === åŒäº‹ç­è¡¨æ¨£å¼ === */
        .others-card {
            background: var(--bg-card); border-radius: 16px; overflow: hidden; margin-bottom: 20px;
            box-shadow: var(--shadow-soft); scroll-margin-top: 180px; border: none;
        }
        .others-header {
            background: #fafafa; padding: 12px 20px; border-bottom: 1px solid #eee;
            display: flex; justify-content: space-between; align-items: center;
        }
        .others-title { font-size: 18px; font-weight: 800; color: var(--text-primary); }
        .others-date { font-size: 14px; color: var(--text-secondary); }

        .store-section { border-bottom: 1px solid #eee; }
        .store-section:last-child { border-bottom: none; }
        .store-title {
            padding: 10px 20px; font-size: 14px; font-weight: 700; color: var(--text-secondary);
            background: #fff; display: flex; align-items: center; letter-spacing: 0.5px;
        }
        .store-icon { margin-right: 6px; font-size: 16px; }

        .staff-row {
            display: flex; justify-content: space-between; align-items: center;
            padding: 12px 20px; border-top: 1px solid #f9f9f9;
        }
        .staff-name { font-weight: 600; font-size: 15px; color: var(--text-primary); }
        .staff-loc-tag { font-size: 11px; background: #fff1f0; color: var(--color-pink); padding: 2px 6px; border-radius: 4px; margin-left: 8px; font-weight: normal;}
        .staff-time { font-family: "SF Mono", monospace; font-size: 14px; color: var(--color-blue); font-weight: 500; }
        .no-staff { padding: 15px 20px; color: var(--text-secondary); font-size: 14px; font-style: italic; border-top: 1px solid #f9f9f9; }

        /* === åº•éƒ¨å°è¦½åˆ— === */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; right: 0;
            background: var(--bg-card); box-shadow: 0 -2px 10px rgba(0,0,0,0.03);
            display: flex; justify-content: space-around; padding: 12px 0 20px 0; z-index: 200;
        }
        .tab-btn {
            border: none; background: none; color: var(--text-secondary); font-size: 11px; font-weight: 600;
            display: flex; flex-direction: column; align-items: center; cursor: pointer; width: 50%;
            transition: color 0.2s;
        }
        .tab-icon { font-size: 24px; margin-bottom: 4px; }
        .tab-btn.active { color: var(--color-purple); }
        
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container">
    <div class="sticky-header">
        <div class="header-controls">
            <button class="arrow-btn" onclick="changeWeek(-1)">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
            </button>
            <div class="date-picker-container">
                <input type="date" id="datePicker" onchange="onDatePick()">
                <div style="font-size: 11px; color: #aaa; margin-top: 2px;">(é»æ“Šé¸æ“‡æ—¥æœŸ)</div>
            </div>
            <button class="arrow-btn" onclick="changeWeek(1)">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>
            </button>
        </div>
        <div class="nav-bar hidden" id="myNavBar"></div>
        <div class="nav-bar hidden" id="othersNavBar"></div>
    </div>

    <div id="contentArea"></div>
</div>

<div class="bottom-nav">
    <button class="tab-btn active" onclick="switchTab('my')" id="tab-my">
        <span class="tab-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
        </span>
        æˆ‘çš„ç­è¡¨
    </button>
    <button class="tab-btn" onclick="switchTab('others')" id="tab-others">
        <span class="tab-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4v2h16V4zm1 10v-2l-1-5H4l-1 5v2h1v6h10v-6h4v6h2v-6h1zm-9 4H6v-4h6v4z"/></svg>
        </span>
        å„åº—æ’ç­
    </button>
</div>

<script>
    // ==========================================
    // 1. è³‡æ–™åº«å€åŸŸ
    // ==========================================
    
    // ã€æˆ‘çš„ç­è¡¨ã€‘(ç‹æ³“éŸ‹) - 12/8 ~ 12/14
    const MY_ROSTER = {
        "2025-12-08": [
            { id: 0, day: "é€±ä¸€", type: "work", name: "ç›Šæ°‘åˆ6", icon: "ğŸ ", list: [{loc:"ç›Šæ°‘åº—", t:"16:15-22:45"}] },
            { id: 1, day: "é€±äºŒ", type: "work", name: "ç›Šæ°‘åˆ6", icon: "ğŸ ", list: [{loc:"ç›Šæ°‘åº—", t:"16:15-22:45"}] },
            { id: 2, day: "é€±ä¸‰", type: "work", name: "æ™ºå–æ”¯æ´", icon: "âš ï¸", list: [
                {loc:"ç«‹é«˜æ™ºå–", t:"08:00-08:30"}, 
                {loc:"é”æ˜æ™ºå–", t:"08:30-09:30"}, 
                {loc:"é•·æ¦®æ™ºå–", t:"09:30-10:30"}
            ]},
            { id: 3, day: "é€±å››", type: "rest", name: "ä¼‘å‡", icon: "ğŸ’¤", list: [] },
            { id: 4, day: "é€±äº”", type: "work", name: "æ”¯æ´å¤§é‡Œ", icon: "âš ï¸", list: [{loc:"å¤§é‡Œåº—", t:"16:15-22:45"}] },
            { id: 5, day: "é€±å…­", type: "rest", name: "ä¼‘å‡", icon: "ğŸ’¤", list: [] },
            { id: 6, day: "é€±æ—¥", type: "rest", name: "ä¼‘å‡", icon: "ğŸ’¤", list: [] }
        ]
    };

    // ã€äº”åº—è©³ç´°ç­è¡¨ã€‘ - 12/8 ~ 12/14
    // é‚è¼¯ï¼šæ ¹æ“šåœ–ç‰‡é¡¯ç¤ºï¼Œå°‡äººå“¡åˆ†é…åˆ°ã€Œå¯¦éš›ä¸Šç­ã€çš„åº—é‹ªã€‚
    const OTHERS_ROSTER = {
        "2025-12-08": [
            {
                date: "12/8 (ä¸€)",
                stores: {
                    "ç›Šæ°‘åº—": [
                        {n:"é„­ç¿”ä»‹", t:"æ—©6"}, {n:"ç‹æ³“éŸ‹", t:"åˆ6"}, {n:"æ½˜æ˜•å²‘", t:"æ™š4"}, {n:"æ—å§¿æ¼©", t:"æ™š4"}
                    ],
                    "å¤§é‡Œåº—": [
                        {n:"æ—è‚²ç‘›", t:"æ—©8"}, {n:"å”ç¾…æ°", t:"åˆ6"}, {n:"ç™½æ²…å¹³", t:"æ™š4"}
                    ],
                    "æ±æ¦®åº—": [
                        {n:"é™³æŸå»·", t:"æ—©8"}, {n:"é‚±éƒç´˜", t:"åˆ6"}, {n:"åŠ‰å‰æ™", t:"æ™š4"}
                    ],
                    "é«˜å·¥åº—": [
                        {n:"æ›¾å®¶ç¹", t:"æ—©8"}, {n:"æ—ä¾ƒè¾°", t:"åˆ6"}, {n:"æ—å¨ç²½", t:"æ™š4"}
                    ],
                    "æ¨¹å¾·åº—": [
                        {n:"ç‹éŸ»æ™´", t:"æ—©8"}, {n:"å¾æŒ¯æ³°", t:"åˆ6"}, {n:"æ—ç´«æ¶µ", t:"æ™š4"}
                    ]
                }
            },
            {
                date: "12/9 (äºŒ)",
                stores: {
                    "ç›Šæ°‘åº—": [
                        {n:"ç‹èºè", t:"æ—©6"}, {n:"ç‹æ³“éŸ‹", t:"åˆ6"}, {n:"é‚±éƒç´˜", t:"æ™š4"}, {n:"æ—å§¿æ¼©", t:"æ™š6"}
                    ],
                    "å¤§é‡Œåº—": [
                        {n:"æ—ç¾½åº­", t:"æ—©8"}, {n:"å¾è‡£å®‡", t:"æ—©6"}, {n:"åŠ‰å‰æ™", t:"åˆ6"}, {n:"æ½˜æ˜•å²‘", t:"æ™š4"}
                    ],
                    "æ±æ¦®åº—": [
                        {n:"é™³æŸå»·", t:"æ—©6"}, {n:"æ–½å®£å‰", t:"åˆ6"}, {n:"æå¾‹è¡¡", t:"æ™š4"}
                    ],
                    "é«˜å·¥åº—": [
                        {n:"æ›¾å®¶ç¹", t:"æ—©8"}, {n:"ç™½æ²…å¹³", t:"åˆ6"}, {n:"æ–½è‚²ä¸", t:"æ™š4"}
                    ],
                    "æ¨¹å¾·åº—": [
                        {n:"ç‹éŸ»æ™´", t:"æ—©8"}, {n:"æ—ç´«æ¶µ", t:"åˆ6"}
                    ]
                }
            },
            {
                date: "12/10 (ä¸‰)",
                stores: {
                    "ç›Šæ°‘åº—": [
                        {n:"ç‹èºè", t:"æ—©6"}, {n:"æ–½è‚²ä¸", t:"åˆ6"}, {n:"å³æŸ”æ—‹", t:"æ™š4"}
                    ],
                    "å¤§é‡Œåº—": [
                        {n:"æ—ç¾½åº­", t:"æ—©8"}, {n:"å¾è‡£å®‡", t:"æ—©4"}, {n:"ç™½æ²…å¹³", t:"åˆ6"}, {n:"åŠ‰å‰æ™", t:"æ™š4"}
                    ],
                    "æ±æ¦®åº—": [
                        {n:"é„­ç¿”ä»‹", t:"æ—©4"}, {n:"æ—è‚²ç‘›", t:"åˆ4"}, {n:"å”ç¾…æ°", t:"åˆ6"}, {n:"æ–½å®£å‰", t:"æ™š4"}
                    ],
                    "é«˜å·¥åº—": [
                        {n:"æ›¾å®¶ç¹", t:"æ—©8"}, {n:"æ—ä¾ƒè¾°", t:"åˆ6"}, {n:"æ—å§¿æ¼©", t:"æ™š4"}, {n:"æ´ªäº¦è“", t:"æ™š4"}
                    ],
                    "æ¨¹å¾·åº—": [
                        {n:"ç‹éŸ»æ™´", t:"æ—©8"}, {n:"æ—ç´«æ¶µ", t:"åˆ6"}
                    ]
                }
            },
            {
                date: "12/11 (å››)",
                stores: {
                    "ç›Šæ°‘åº—": [
                        {n:"ç‹èºè", t:"æ—©6"}, {n:"æ½˜æ˜•å²‘", t:"åˆ6"}, {n:"é‚±éƒç´˜", t:"æ™š4"}
                    ],
                    "å¤§é‡Œåº—": [
                        {n:"æ—ç¾½åº­", t:"æ—©8"}, {n:"åŠ‰å‰æ™", t:"åˆ6"}, {n:"ç™½æ²…å¹³", t:"æ™š4"}
                    ],
                    "æ±æ¦®åº—": [
                        {n:"é™³æŸå»·", t:"æ—©6"}, {n:"å³æŸ”æ—‹", t:"åˆ6"}, {n:"æå¾‹è¡¡", t:"æ™š4"}
                    ],
                    "é«˜å·¥åº—": [
                        {n:"æ›¾å®¶ç¹", t:"æ—©8"}, {n:"æ¥Šä½³å‹", t:"åˆ6"}, {n:"æ–½è‚²ä¸", t:"æ™š4"}
                    ],
                    "æ¨¹å¾·åº—": [
                        {n:"æè‚²å˜‰", t:"æ—©8"}, {n:"æ—å¨ç²½", t:"åˆ6"}
                    ]
                }
            },
            {
                date: "12/12 (äº”)",
                stores: {
                    "ç›Šæ°‘åº—": [
                        {n:"ç‹èºè", t:"æ—©6"}, {n:"é‚±éƒç´˜", t:"åˆ6"}, {n:"æ–½è‚²ä¸", t:"æ™š4"}
                    ],
                    "å¤§é‡Œåº—": [
                        {n:"æ—ç¾½åº­", t:"æ—©8"}, {n:"å¾è‡£å®‡", t:"æ—©4"}, {n:"ç‹æ³“éŸ‹", t:"åˆ6"}, {n:"æ—å§¿æ¼©", t:"åˆ6"}, {n:"æ¥Šä½³å‹", t:"æ™š4"}
                    ],
                    "æ±æ¦®åº—": [
                        {n:"é™³æŸå»·", t:"æ—©8"}, {n:"å³æŸ”æ—‹", t:"åˆ6"}, {n:"æ–½å®£å‰", t:"æ™š4"}
                    ],
                    "é«˜å·¥åº—": [
                        {n:"æ›¾å®¶ç¹", t:"æ—©8"}, {n:"æ—ä¾ƒè¾°", t:"åˆ6"}, {n:"æ—å¨ç²½", t:"æ™š4"}
                    ],
                    "æ¨¹å¾·åº—": [
                        {n:"ç‹éŸ»æ™´", t:"æ—©8"}, {n:"å¾æŒ¯æ³°", t:"åˆ6"}, {n:"æ—ç´«æ¶µ", t:"æ™š4"}
                    ]
                }
            },
            {
                date: "12/13 (å…­)",
                stores: {
                    "ç›Šæ°‘åº—": [
                        {n:"æ—è‚²ç‘›", t:"æ—©8"}, {n:"æ½˜æ˜•å²‘", t:"åˆ6"}
                    ],
                    "å¤§é‡Œåº—": [
                        {n:"ç‹éŸ»æ™´", t:"æ—©8"}, {n:"æ¥Šä½³å‹", t:"åˆ6"}
                    ],
                    "æ±æ¦®åº—": [
                        {n:"é‚±éƒç´˜", t:"æ—©8"}, {n:"å³æŸ”æ—‹", t:"åˆ6"}
                    ],
                    "é«˜å·¥åº—": [
                        {n:"æ—ç¾½åº­", t:"æ—©8"}, {n:"å¾è‡£å®‡", t:"æ—©6"}, {n:"æ—å¨ç²½", t:"åˆ6"}
                    ],
                    "æ¨¹å¾·åº—": [
                        {n:"æè‚²å˜‰", t:"æ—©8"}, {n:"æ´ªéŠ˜æƒ ", t:"åˆ6"}
                    ]
                }
            },
            {
                date: "12/14 (æ—¥)",
                stores: {
                    "ç›Šæ°‘åº—": [
                        {n:"é„­ç¿”ä»‹", t:"æ—©4"}, {n:"æ½˜æ˜•å²‘", t:"åˆ8"}
                    ],
                    "å¤§é‡Œåº—": [
                        {n:"æ—è‚²ç‘›", t:"æ—©6"}, {n:"æ¥Šä½³å‹", t:"åˆ6"}
                    ],
                    "æ±æ¦®åº—": [
                        {n:"é™³æŸå»·", t:"æ—©6"}, {n:"æå¾‹è¡¡", t:"åˆ6"}
                    ],
                    "é«˜å·¥åº—": [
                        {n:"æ´ªéŠ˜æƒ ", t:"æ—©6"}, {n:"æ–½è‚²ä¸", t:"åˆ6"}
                    ],
                    "æ¨¹å¾·åº—": [
                        {n:"æ—ä¾ƒè¾°", t:"æ—©6"}, {n:"æ´ªäº¦è“", t:"åˆ6"}
                    ]
                }
            }
        ]
    };

    // ==========================================
    // 2. ç¨‹å¼é‚è¼¯
    // ==========================================
    function getMonday(d) {
        d = new Date(d);
        var day = d.getDay();
        var diff = d.getDate() - day + (day == 0 ? -6 : 1);
        return new Date(d.setDate(diff));
    }
    function formatDateISO(d) {
        let y = d.getFullYear();
        let m = String(d.getMonth() + 1).padStart(2, '0');
        let day = String(d.getDate()).padStart(2, '0');
        return `${y}-${m}-${day}`;
    }

    // å°‡é è¨­æ—¥æœŸè¨­å®šç‚º 2025-12-08
    let currentMonday = getMonday(new Date("2025-12-08"));
    let currentTab = 'my'; 

    // åˆå§‹åŒ–
    renderPage();

    function switchTab(tabName) {
        currentTab = tabName;
        document.getElementById('tab-my').className = tabName === 'my' ? 'tab-btn active' : 'tab-btn';
        document.getElementById('tab-others').className = tabName === 'others' ? 'tab-btn active' : 'tab-btn';
        renderPage();
    }

    function changeWeek(offset) {
        currentMonday.setDate(currentMonday.getDate() + (offset * 7));
        renderPage();
    }
    
    function onDatePick() {
        const picker = document.getElementById("datePicker");
        if(picker.value) {
            currentMonday = getMonday(new Date(picker.value));
            renderPage();
        }
    }

    function renderPage() {
        let dateKey = formatDateISO(currentMonday);
        document.getElementById("datePicker").value = dateKey;

        const contentDiv = document.getElementById("contentArea");
        const myNav = document.getElementById("myNavBar");
        const othersNav = document.getElementById("othersNavBar");
        
        contentDiv.innerHTML = "";

        if (currentTab === 'my') {
            myNav.classList.remove("hidden");
            othersNav.classList.add("hidden");
            renderMySchedule(dateKey, contentDiv, myNav);
        } else {
            myNav.classList.add("hidden");
            othersNav.classList.remove("hidden");
            renderOthersSchedule(dateKey, contentDiv, othersNav);
        }
    }

    // æ¸²æŸ“ï¼šæˆ‘çš„ç­è¡¨
    function renderMySchedule(dateKey, listDiv, navDiv) {
        const weekData = MY_ROSTER[dateKey];
        navDiv.innerHTML = "";

        if (!weekData) {
            listDiv.innerHTML = `<div class="empty-week">ğŸ“… æœ¬é€±å°šç„¡æ‚¨çš„ç­è¡¨</div>`;
            return;
        }

        weekData.forEach((item, index) => {
            let btn = document.createElement("button");
            btn.className = "nav-btn";
            btn.innerText = item.day.replace("é€±","");
            btn.onclick = () => scrollToId(`card-${index}`, index, 'my');
            btn.id = `my-btn-${index}`;
            navDiv.appendChild(btn);

            let html = `
                <div class="day-card ${item.type}" id="card-${index}">
                    <div class="card-header">
                        <span class="day-title">${item.day}</span>
                        <span class="shift-badge">
                            <span class="badge-icon">${item.icon || ''}</span>
                            ${item.name}
                        </span>
                    </div>
            `;
            if(item.list.length > 0) {
                item.list.forEach(sub => {
                    html += `
                        <div class="detail-row">
                            <span class="loc-container">
                                <span class="loc-pin">ğŸ“</span>
                                ${sub.loc}
                            </span>
                            <span class="time">${sub.t}</span>
                        </div>`;
                });
            }
            html += `</div>`;
            listDiv.innerHTML += html;
        });
        
        autoHighlightDay('my');
    }

    // æ¸²æŸ“ï¼šäº”åº—ç­è¡¨
    function renderOthersSchedule(dateKey, listDiv, navDiv) {
        const weekData = OTHERS_ROSTER[dateKey];
        navDiv.innerHTML = "";

        if (!weekData) {
            listDiv.innerHTML = `<div class="empty-week">ğŸ‘¥ æœ¬é€±å°šæœªè¨˜éŒ„åŒäº‹ç­è¡¨</div>`;
            return;
        }

        const days = ["ä¸€", "äºŒ", "ä¸‰", "å››", "äº”", "å…­", "æ—¥"];
        
        weekData.forEach((dayInfo, index) => {
            let btn = document.createElement("button");
            btn.className = "nav-btn";
            btn.innerText = days[index];
            btn.onclick = () => scrollToId(`others-${index}`, index, 'others');
            btn.id = `others-btn-${index}`;
            navDiv.appendChild(btn);

            let html = `
                <div class="others-card" id="others-${index}">
                    <div class="others-header">
                        <span class="others-title">${dayInfo.date.split(' ')[0]} é€±${days[index]}</span>
                    </div>
            `;

            const storeOrder = ["ç›Šæ°‘åº—", "å¤§é‡Œåº—", "æ±æ¦®åº—", "é«˜å·¥åº—", "æ¨¹å¾·åº—"];
            
            storeOrder.forEach(storeName => {
                let staffs = dayInfo.stores[storeName];
                html += `<div class="store-section">
                            <div class="store-title">
                                <span class="store-icon">ğŸ¢</span>${storeName}
                            </div>`;
                
                if(staffs && staffs.length > 0) {
                    staffs.forEach(p => {
                        html += `
                            <div class="staff-row">
                                <div>
                                    <span class="staff-name">${p.n}</span>
                                    ${p.t.includes('(') ? `<span class="staff-loc-tag">${p.t.split('(')[1].replace(')','')}</span>` : ''}
                                </div>
                                <span class="staff-time">${p.t.split(' ')[0]}</span>
                            </div>
                        `;
                    });
                } else {
                    html += `<div class="no-staff">æœ¬æ—¥ç„¡æ’ç­</div>`;
                }
                html += `</div>`;
            });

            html += `</div>`;
            listDiv.innerHTML += html;
        });

        autoHighlightDay('others');
    }

    function scrollToId(elementId, index, prefix) {
        document.querySelectorAll(`#${prefix}NavBar .nav-btn`).forEach(b => b.classList.remove('active'));
        let btn = document.getElementById(`${prefix}-btn-${index}`);
        if(btn) btn.classList.add('active');
        
        const el = document.getElementById(elementId);
        if(el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function autoHighlightDay(prefix) {
        let today = new Date();
        let diffTime = today - currentMonday;
        let diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
        
        let targetIdx = 0; // default Monday
        if (diffDays >= 0 && diffDays <= 6) {
            let todayIdx = today.getDay() - 1;
            if (todayIdx < 0) todayIdx = 6;
            targetIdx = todayIdx;
        }
        
        setTimeout(() => {
            let btn = document.getElementById(`${prefix}-btn-${targetIdx}`);
            if(btn) btn.classList.add('active');
        }, 50);
    }
</script>
</body>
</html>
